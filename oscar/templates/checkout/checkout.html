{% extends "checkout/layout.html" %}
{% load currency_filters %}

{% block title %}
Checkout | {{ block.super }}
{% endblock %}

{% block header %}
{% endblock header %}

{% block checkout-nav %}
{% include 'checkout/nav.html' %}
{% endblock %}

{% block content %}

{% block order_contents %}
<div class="sub-header">
    <h3>Order contents</h3>
</div>
<div class="basket-title">
    <div class="row-fluid">
        <h4 class="span10">Items Summary</h4>
        <h4 class="span1">Quantity</h4>
        <h4 class="span1">Price</h4>
    </div>
</div>
{% for line in basket.lines.all %}
<div class="basket-items">
    <div class="row-fluid">
        <div class="span10">
            <h4><a href="{{ line.product.get_absolute_url }}">{{ line.description }}</a></h4>
            <p class="app-ico instock avaliability ">{{ line.product.stockrecord.availability }}</p>
        </div>
        <div class="span1">
            <p>{{ line.quantity }}<p>
        </div>
        <div class="span1">
            <p class="price">{{ line.line_price_incl_tax|currency }}</p>
        </div>        
    </div>
</div>
{% endfor %}
{% for discount in basket.discounts %}
<div class="basket-items">
    <div class="row-fluid">
        <div class="span11">
            <h4>{{ discount.name }}</h4>
        </div>
        <div class="span1">
            <p>-{{ discount.discount|currency }}</p>
        </div>
    </div>
</div>
{% endfor %}
{% if shipping_total_excl_tax %}
<div class="basket-items">
    <div class="row-fluid">
        <div class="span11">
            <h4>Shipping charge</h4>
        </div>
        <div class="span1">
            <p>{{ shipping_total_incl_tax|currency }}</p>
        </div>
    </div>
</div>
{% endif %}
<div class="basket-items">
    <div class="row-fluid">
        <div class="span11">
            <h4>Basket total</h4>
        </div>
        <div class="span1">
            <p>{{ basket.total_incl_tax|currency }}</p>
        </div>
    </div>
</div>
<div class="basket-items">
    <div class="row-fluid">
        <div class="span11">
            <h4>Order total</h4>
        </div>
        <div class="span1">
            <p>{{ order_total_incl_tax|currency }}</p>
        </div>
    </div>
</div>
<div class="form-actions">
    <a href="{% url basket:summary %}" class="btn">Edit order contents</a>
</div>
{% endblock order_contents %}

<div class="sub-header">
    <h2>Where should we ship to?</h2>
</div>
<div class="row-fluid">

		{% block shipping_address %}
		<div class="sub-header">
							<h2>Shipping address</h2>
						</div>
		<div class="well well-success">
			<dl>
				<dt>Address</dt>
				<dd>
					{% for field in shipping_address.active_address_fields %}
					{{ field }}<br/>
					{% endfor %}
				</dd>
				{% if shipping_address.phone_number %}
				<dt>Contact number</dt>
				<dd>{{ shipping_addr.phone_number }}</dd>
				{% endif %}
				{% if shipping_address.notes %}
				<dt>Shipping notes</dt>
				<dd>{{ shipping_addr.notes }}</dd>
				{% endif %} 
			</dl>
			<div class="alert-actions">
				<a href="{% url checkout:shipping-address %}" class="btn">Change shipping address</a>
			</div>
		</div>
		{% endblock shipping_address %}
	<!-- <div class="span6">
			<div class="sub-header">
				<h2>Payment</h2>
			</div>
		</div> -->
</div>
{% block shipping_method %}
<div class="sub-header">
    <h3>Shipping method</h3>
</div>

{% if shipping_method %}
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>Method</th>
            <th>Cost</th>
            <th>Description</th>
            <th></th>
        </tr>
    <thead>
    <tbody>
        <tr>
            <td>{{ shipping_method.name }}</td>
            <td>{{ shipping_method.basket_charge_incl_tax|currency }}</td>
            <td>{{ shipping_method.description }}</td>
            <td></td>
    </tbody>
</table>
{% endif %}
{% endblock shipping_method %}

{% block payment_method %}
{% endblock payment_method %}

{% block payment_details %}
{% endblock payment_details %}

{% block place_order %}
{% endblock place_order %}

{% endblock content %}

{% block onbodyload %}
oscar.checkout.init();
{% endblock %}

